<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matrix Calculator | Animated</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2980b9;
            --background-color: #f5f7fa;
            --text-color: #333;
            --border-color: #ddd;
            --error-color: #e74c3c;
            --success-color: #2ecc71;
            --matrix-a-color: #3498db;
            --matrix-b-color: #e74c3c;
            --result-color: #2ecc71;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        html {
            height: 100%;
            overflow-x: hidden;
        }

        body {
            min-height: 100%;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            position: relative;
            background: linear-gradient(-45deg, #f5f7fa, #e4e8eb, #f5f7fa);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            overflow-x: hidden;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: var(--primary-color);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            animation: fadeInDown 1s;
        }

        .calculator {
            background: white;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 25px;
            margin-bottom: 30px;
            transform: translateY(0);
            transition: transform 0.3s, box-shadow 0.3s;
            animation: fadeInUp 0.8s;
        }

        .calculator:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .matrix-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            gap: 20px;
            margin-bottom: 20px;
            max-height: 400px; /* Fixed height for matrix container */
            overflow-y: auto; /* Enable scrolling only for matrices */
            padding: 10px;
        }

        .matrix {
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: all 0.5s;
        }

        .matrix h3 {
            margin-bottom: 10px;
            color: var(--secondary-color);
            position: relative;
            display: inline-block;
        }

        .matrix h3::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 2px;
            bottom: -5px;
            left: 0;
            background-color: var(--primary-color);
            transform: scaleX(0);
            transform-origin: right;
            transition: transform 0.3s ease;
        }

        .matrix:hover h3::after {
            transform: scaleX(1);
            transform-origin: left;
        }

        .matrix-input {
            display: grid;
            gap: 5px;
            margin-bottom: 10px;
            transition: all 0.5s;
            position: relative;
            padding: 0 20px;
        }

        .matrix-input input {
            width: 60px;
            height: 40px;
            text-align: center;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 16px;
            transition: all 0.3s;
        }

        .matrix-input input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
            transform: scale(1.05);
        }

        #matrixA .matrix-input input {
            border-color: var(--matrix-a-color);
        }

        #matrixB .matrix-input input {
            border-color: var(--matrix-b-color);
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .dimension-control {
            display: flex;
            gap: 10px;
            align-items: center;
            transition: all 0.3s;
        }

        .dimension-control:hover {
            transform: translateY(-2px);
        }

        .dimension-control label {
            font-weight: 600;
        }

        .dimension-control input {
            width: 50px;
            height: 30px;
            text-align: center;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            transition: all 0.3s;
        }

        .dimension-control input:focus {
            transform: scale(1.1);
        }

        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        button::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }

        button:focus:not(:active)::after {
            animation: ripple 1s ease-out;
        }

        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(20, 20);
                opacity: 0;
            }
        }

        button:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        button:active {
            transform: translateY(0);
        }

        .operations {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
        }

        .operation-btn {
            background-color: #f1f1f1;
            color: var(--text-color);
            border: 1px solid var(--border-color);
            transition: all 0.3s;
        }

        .operation-btn:hover {
            background-color: #e1e1e1;
            transform: translateY(-2px);
        }

        .operation-btn.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .result-container {
            margin-top: 30px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s;
            max-height: 0;
            overflow: hidden;
        }

        .result-container.show {
            opacity: 1;
            transform: translateY(0);
            max-height: 1000px; /* Adjust based on your needs */
        }

        .result-matrix {
            display: inline-grid;
            gap: 5px;
            margin-top: 10px;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 4px;
            border: 1px solid var(--border-color);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(46, 204, 113, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(46, 204, 113, 0); }
            100% { box-shadow: 0 0 0 0 rgba(46, 204, 113, 0); }
        }

        .result-value {
            padding: 10px;
            background-color: white;
            border: 1px solid var(--result-color);
            border-radius: 4px;
            text-align: center;
            min-width: 60px;
            transition: all 0.3s;
        }

        .result-value:hover {
            transform: scale(1.1);
            background-color: rgba(46, 204, 113, 0.1);
        }

        .error {
            color: var(--error-color);
            margin-top: 10px;
            font-weight: 600;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        .success {
            color: var(--success-color);
            margin-top: 10px;
            font-weight: 600;
        }

        .matrix-bracket {
            position: absolute;
            height: 100%;
            width: 20px;
            top: 0;
            pointer-events: none;
        }

        .left-bracket {
            left: -15px;
            border-left: 3px solid var(--matrix-a-color);
            border-top: 3px solid var(--matrix-a-color);
            border-bottom: 3px solid var(--matrix-a-color);
            border-radius: 8px 0 0 8px;
        }

        .right-bracket {
            right: -15px;
            border-right: 3px solid var(--matrix-a-color);
            border-top: 3px solid var(--matrix-a-color);
            border-bottom: 3px solid var(--matrix-a-color);
            border-radius: 0 8px 8px 0;
        }

        #matrixB .left-bracket, #matrixB .right-bracket {
            border-color: var(--matrix-b-color);
        }

        .operation-icon {
            margin-right: 5px;
        }

        .particle-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            animation: floatParticle linear infinite;
        }
        
        @keyframes floatParticle {
            0% { 
                transform: translateY(100vh) translateX(0); 
                opacity: 0;
            }
            10% {
                opacity: 0.2;
            }
            90% {
                opacity: 0.2;
            }
            100% { 
                transform: translateY(-100px) translateX(calc(var(--move-x) * 100px)); 
                opacity: 0;
            }
        }

        @media (max-width: 768px) {
            .matrix-container {
                flex-direction: column;
                align-items: center;
                max-height: none; /* Remove fixed height on mobile */
                overflow-y: visible;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .container {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="particle-container" id="particleContainer"></div>

    <div class="container">
        <h1 class="animate__animated animate__fadeInDown">Matrix Calculator</h1>
        
        <div class="calculator animate__animated animate__fadeInUp">
            <div class="controls">
                <div class="dimension-control animate__animated animate__fadeInLeft">
                    <label for="rowsA">Rows (A):</label>
                    <input type="number" id="rowsA" min="1" max="6" value="2">
                </div>
                <div class="dimension-control animate__animated animate__fadeInLeft animate__delay-1s">
                    <label for="colsA">Columns (A):</label>
                    <input type="number" id="colsA" min="1" max="6" value="2">
                </div>
                <div class="dimension-control animate__animated animate__fadeInRight animate__delay-1s" id="matrixBDimensions">
                    <label for="rowsB">Rows (B):</label>
                    <input type="number" id="rowsB" min="1" max="6" value="2">
                    <label for="colsB">Columns (B):</label>
                    <input type="number" id="colsB" min="1" max="6" value="2">
                </div>
                <button id="updateMatrices" class="animate__animated animate__fadeIn animate__delay-2s">Update Matrices</button>
            </div>
            
            <div class="matrix-container">
                <div class="matrix" id="matrixA">
                    <h3>Matrix A</h3>
                    <div class="matrix-input">
                        <div class="matrix-bracket left-bracket"></div>
                        <div class="matrix-bracket right-bracket"></div>
                    </div>
                </div>
                
                <div class="matrix" id="matrixB">
                    <h3>Matrix B</h3>
                    <div class="matrix-input">
                        <div class="matrix-bracket left-bracket"></div>
                        <div class="matrix-bracket right-bracket"></div>
                    </div>
                </div>
            </div>
            
            <div class="operations">
                <button class="operation-btn animate__animated animate__fadeIn animate__delay-3s" data-operation="add">
                    <span class="operation-icon">+</span> A + B
                </button>
                <button class="operation-btn animate__animated animate__fadeIn animate__delay-3s" data-operation="subtract">
                    <span class="operation-icon">-</span> A - B
                </button>
                <button class="operation-btn animate__animated animate__fadeIn animate__delay-4s" data-operation="multiply">
                    <span class="operation-icon">×</span> A × B
                </button>
                <button class="operation-btn animate__animated animate__fadeIn animate__delay-4s" data-operation="determinant">
                    <span class="operation-icon">|A|</span> det(A)
                </button>
                <button class="operation-btn animate__animated animate__fadeIn animate__delay-5s" data-operation="inverse">
                    <span class="operation-icon">A⁻¹</span> Inverse
                </button>
                <button class="operation-btn animate__animated animate__fadeIn animate__delay-5s" data-operation="transpose">
                    <span class="operation-icon">Aᵀ</span> Transpose
                </button>
                <button class="operation-btn animate__animated animate__fadeIn animate__delay-6s" data-operation="eigenvalues">
                    <span class="operation-icon">λ</span> Eigenvalues
                </button>
                <button class="operation-btn animate__animated animate__fadeIn animate__delay-6s" data-operation="rank">
                    <span class="operation-icon">rank</span> Rank
                </button>
            </div>
            
            <button id="calculateBtn" class="animate__animated animate__fadeIn animate__delay-7s">Calculate</button>
            
            <div class="result-container" id="resultContainer">
                <h3>Result</h3>
                <div id="result"></div>
                <div id="error" class="error"></div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM elements
            const rowsAInput = document.getElementById('rowsA');
            const colsAInput = document.getElementById('colsA');
            const rowsBInput = document.getElementById('rowsB');
            const colsBInput = document.getElementById('colsB');
            const updateBtn = document.getElementById('updateMatrices');
            const matrixA = document.getElementById('matrixA').querySelector('.matrix-input');
            const matrixB = document.getElementById('matrixB').querySelector('.matrix-input');
            const operationBtns = document.querySelectorAll('.operation-btn');
            const calculateBtn = document.getElementById('calculateBtn');
            const resultDiv = document.getElementById('result');
            const errorDiv = document.getElementById('error');
            const matrixBDimensions = document.getElementById('matrixBDimensions');
            const resultContainer = document.getElementById('resultContainer');
            const matrixContainer = document.querySelector('.matrix-container');
            
            let selectedOperation = null;
            
            // Initialize matrices with animation
            function createMatrixInput(container, rows, cols) {
                container.innerHTML = '';
                container.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
                
                // Add bracket elements back
                const leftBracket = document.createElement('div');
                leftBracket.className = 'matrix-bracket left-bracket';
                container.appendChild(leftBracket);
                
                // Create input cells with animation
                for (let i = 0; i < rows; i++) {
                    for (let j = 0; j < cols; j++) {
                        const input = document.createElement('input');
                        input.type = 'number';
                        input.value = i === j ? '1' : '0';
                        input.dataset.row = i;
                        input.dataset.col = j;
                        input.style.opacity = '0';
                        input.style.transform = 'scale(0.5)';
                        container.appendChild(input);
                        
                        // Animate each cell with a delay
                        setTimeout(() => {
                            input.style.transition = 'all 0.3s ease-out';
                            input.style.opacity = '1';
                            input.style.transform = 'scale(1)';
                        }, (i * cols + j) * 50);
                    }
                }
                
                // Add right bracket
                const rightBracket = document.createElement('div');
                rightBracket.className = 'matrix-bracket right-bracket';
                container.appendChild(rightBracket);
            }
            
            function updateMatrices() {
                const rowsA = parseInt(rowsAInput.value);
                const colsA = parseInt(colsAInput.value);
                const rowsB = parseInt(rowsBInput.value);
                const colsB = parseInt(colsBInput.value);
                
                // Animate out old matrices
                matrixA.style.transform = 'scale(0.8)';
                matrixA.style.opacity = '0';
                matrixB.style.transform = 'scale(0.8)';
                matrixB.style.opacity = '0';
                
                setTimeout(() => {
                    createMatrixInput(matrixA, rowsA, colsA);
                    createMatrixInput(matrixB, rowsB, colsB);
                    
                    // Animate in new matrices
                    matrixA.style.transition = 'all 0.3s ease-out';
                    matrixB.style.transition = 'all 0.3s ease-out';
                    matrixA.style.transform = 'scale(1)';
                    matrixA.style.opacity = '1';
                    matrixB.style.transform = 'scale(1)';
                    matrixB.style.opacity = '1';
                }, 300);
                
                // Reset selection when dimensions change
                selectedOperation = null;
                operationBtns.forEach(btn => btn.classList.remove('active'));
                errorDiv.textContent = '';
                resultDiv.innerHTML = '';
                resultContainer.classList.remove('show');
            }
            
            // Operation selection with animation
            operationBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    if (selectedOperation === this.dataset.operation) return;
                    
                    selectedOperation = this.dataset.operation;
                    operationBtns.forEach(b => {
                        b.classList.remove('active');
                        b.style.transform = 'translateY(0)';
                    });
                    this.classList.add('active');
                    
                    // Add bounce animation to selected button
                    this.style.transform = 'translateY(-5px)';
                    setTimeout(() => {
                        this.style.transform = 'translateY(-2px)';
                    }, 150);
                    
                    errorDiv.textContent = '';
                    
                    // Hide matrix B for unary operations with animation
                    if (['determinant', 'inverse', 'transpose', 'eigenvalues', 'rank'].includes(selectedOperation)) {
                        document.getElementById('matrixB').style.display = 'none';
                        matrixBDimensions.style.display = 'none';
                    } else {
                        document.getElementById('matrixB').style.display = '';
                        matrixBDimensions.style.display = '';
                        document.getElementById('matrixB').classList.add('animate__animated', 'animate__fadeIn');
                    }
                });
            });
            
            // Calculate button with animation
            calculateBtn.addEventListener('click', function() {
                if (!selectedOperation) {
                    errorDiv.textContent = 'Please select an operation first';
                    errorDiv.classList.remove('animate__animated', 'animate__shakeX');
                    void errorDiv.offsetWidth; // Trigger reflow
                    errorDiv.classList.add('animate__animated', 'animate__shakeX');
                    return;
                }
                
                // Add loading animation to button
                this.innerHTML = '<span class="animate__animated animate__fadeInOut">Calculating...</span>';
                this.disabled = true;
                
                errorDiv.textContent = '';
                resultDiv.innerHTML = '';
                
                try {
                    const rowsA = parseInt(rowsAInput.value);
                    const colsA = parseInt(colsAInput.value);
                    
                    // Get matrix A values
                    const matrixAValues = [];
                    for (let i = 0; i < rowsA; i++) {
                        const row = [];
                        for (let j = 0; j < colsA; j++) {
                            const input = document.querySelector(`#matrixA input[data-row="${i}"][data-col="${j}"]`);
                            row.push(parseFloat(input.value) || 0);
                        }
                        matrixAValues.push(row);
                    }
                    
                    // Get matrix B values if needed
                    let matrixBValues = null;
                    if (['add', 'subtract', 'multiply'].includes(selectedOperation)) {
                        const rowsB = parseInt(rowsBInput.value);
                        const colsB = parseInt(colsBInput.value);
                        
                        matrixBValues = [];
                        for (let i = 0; i < rowsB; i++) {
                            const row = [];
                            for (let j = 0; j < colsB; j++) {
                                const input = document.querySelector(`#matrixB input[data-row="${i}"][data-col="${j}"]`);
                                row.push(parseFloat(input.value) || 0);
                            }
                            matrixBValues.push(row);
                        }
                    }
                    
                    // Simulate API call with timeout
                    setTimeout(() => {
                        try {
                            const result = performCalculation(selectedOperation, matrixAValues, matrixBValues);
                            displayResult(result);
                        } catch (error) {
                            errorDiv.textContent = error.message;
                            errorDiv.classList.remove('animate__animated', 'animate__shakeX');
                            void errorDiv.offsetWidth;
                            errorDiv.classList.add('animate__animated', 'animate__shakeX');
                        } finally {
                            calculateBtn.innerHTML = 'Calculate';
                            calculateBtn.disabled = false;
                        }
                    }, 800);
                    
                } catch (error) {
                    errorDiv.textContent = 'An error occurred: ' + error.message;
                    errorDiv.classList.remove('animate__animated', 'animate__shakeX');
                    void errorDiv.offsetWidth;
                    errorDiv.classList.add('animate__animated', 'animate__shakeX');
                    
                    calculateBtn.innerHTML = 'Calculate';
                    calculateBtn.disabled = false;
                }
            });
            
            // Perform calculations (mock implementation)
            function performCalculation(operation, matrixA, matrixB) {
                // Mock implementation - in a real app, you'd call your backend
                switch(operation) {
                    case 'add':
                        if (matrixA.length !== matrixB.length || matrixA[0].length !== matrixB[0].length) {
                            throw new Error('Matrices must have same dimensions for addition');
                        }
                        return matrixA.map((row, i) => row.map((val, j) => val + matrixB[i][j]));
                        
                    case 'subtract':
                        if (matrixA.length !== matrixB.length || matrixA[0].length !== matrixB[0].length) {
                            throw new Error('Matrices must have same dimensions for subtraction');
                        }
                        return matrixA.map((row, i) => row.map((val, j) => val - matrixB[i][j]));
                        
                    case 'multiply':
                        if (matrixA[0].length !== matrixB.length) {
                            throw new Error('Columns of A must match rows of B for multiplication');
                        }
                        const result = new Array(matrixA.length).fill(0).map(() => new Array(matrixB[0].length).fill(0));
                        for (let i = 0; i < matrixA.length; i++) {
                            for (let j = 0; j < matrixB[0].length; j++) {
                                for (let k = 0; k < matrixA[0].length; k++) {
                                    result[i][j] += matrixA[i][k] * matrixB[k][j];
                                }
                            }
                        }
                        return result;
                        
                    case 'determinant':
                        if (matrixA.length !== matrixA[0].length) {
                            throw new Error('Matrix must be square to calculate determinant');
                        }
                        // Simple 2x2 determinant for demo
                        if (matrixA.length === 2) {
                            return matrixA[0][0] * matrixA[1][1] - matrixA[0][1] * matrixA[1][0];
                        }
                        return "Determinant calculation for n>2 not implemented in demo";
                        
                    case 'inverse':
                        if (matrixA.length !== matrixA[0].length) {
                            throw new Error('Matrix must be square to calculate inverse');
                        }
                        // Simple 2x2 inverse for demo
                        if (matrixA.length === 2) {
                            const det = matrixA[0][0] * matrixA[1][1] - matrixA[0][1] * matrixA[1][0];
                            if (det === 0) throw new Error('Matrix is not invertible (determinant is 0)');
                            return [
                                [matrixA[1][1]/det, -matrixA[0][1]/det],
                                [-matrixA[1][0]/det, matrixA[0][0]/det]
                            ];
                        }
                        return "Inverse calculation for n>2 not implemented in demo";
                        
                    case 'transpose':
                        return matrixA[0].map((_, i) => matrixA.map(row => row[i]));
                        
                    case 'eigenvalues':
                        if (matrixA.length !== matrixA[0].length) {
                            throw new Error('Matrix must be square to calculate eigenvalues');
                        }
                        return "Eigenvalue calculation not implemented in demo";
                        
                    case 'rank':
                        return "Rank calculation not implemented in demo";
                        
                    default:
                        throw new Error('Unknown operation');
                }
            }
            
            // Display result with animation
            function displayResult(result) {
                resultDiv.innerHTML = '';
                resultContainer.classList.add('show');
                
                if (Array.isArray(result)) {
                    // Matrix result
                    const resultMatrix = document.createElement('div');
                    resultMatrix.className = 'result-matrix';
                    resultMatrix.style.gridTemplateColumns = `repeat(${result[0].length}, 1fr)`;
                    resultMatrix.style.opacity = '0';
                    resultMatrix.style.transform = 'scale(0.8)';
                    
                    result.forEach((row, i) => {
                        if (Array.isArray(row)) {
                            row.forEach((val, j) => {
                                const cell = document.createElement('div');
                                cell.className = 'result-value';
                                cell.textContent = typeof val === 'number' ? val.toFixed(4) : val;
                                cell.style.opacity = '0';
                                cell.style.transform = 'translateY(20px)';
                                cell.style.transitionDelay = `${(i * row.length + j) * 0.05}s`;
                                resultMatrix.appendChild(cell);
                            });
                        } else {
                            const cell = document.createElement('div');
                            cell.className = 'result-value';
                            cell.textContent = typeof row === 'number' ? row.toFixed(4) : row;
                            cell.style.opacity = '0';
                            cell.style.transform = 'translateY(20px)';
                            cell.style.transitionDelay = `${i * 0.05}s`;
                            resultMatrix.appendChild(cell);
                        }
                    });
                    
                    resultDiv.appendChild(resultMatrix);
                    
                    // Animate result matrix
                    setTimeout(() => {
                        resultMatrix.style.opacity = '1';
                        resultMatrix.style.transform = 'scale(1)';
                        resultMatrix.style.transition = 'all 0.5s ease-out';
                        
                        // Animate individual cells
                        const cells = resultMatrix.querySelectorAll('.result-value');
                        cells.forEach(cell => {
                            cell.style.opacity = '1';
                            cell.style.transform = 'translateY(0)';
                            cell.style.transition = 'all 0.3s ease-out';
                        });
                    }, 100);
                } else {
                    // Scalar result
                    const resultValue = document.createElement('div');
                    resultValue.className = 'result-value animate__animated animate__bounceIn';
                    resultValue.style.display = 'inline-block';
                    resultValue.style.marginTop = '10px';
                    resultValue.style.opacity = '0';
                    resultValue.textContent = typeof result === 'number' ? result.toFixed(4) : result;
                    resultDiv.appendChild(resultValue);
                    
                    // Animate scalar result
                    setTimeout(() => {
                        resultValue.style.opacity = '1';
                        resultValue.classList.add('animate__animated', 'animate__tada');
                    }, 100);
                }
            }
            
            // Initialize with animations
            setTimeout(() => {
                updateMatrices();
            }, 500);
            
            updateBtn.addEventListener('click', updateMatrices);
            
            // Add hover effect to matrix containers
            document.querySelectorAll('.matrix').forEach(matrix => {
                matrix.addEventListener('mouseenter', function() {
                    this.classList.add('animate__animated', 'animate__pulse');
                });
                
                matrix.addEventListener('mouseleave', function() {
                    this.classList.remove('animate__animated', 'animate__pulse');
                });
            });

            // Create floating particles
            const particleContainer = document.getElementById('particleContainer');
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.width = `${Math.random() * 5 + 2}px`;
                particle.style.height = particle.style.width;
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.setProperty('--move-x', Math.random() * 2 - 1);
                particle.style.animationDuration = `${Math.random() * 10 + 5}s`;
                particle.style.animationDelay = `${Math.random() * 5}s`;
                particleContainer.appendChild(particle);
            }
        });
    </script>
</body>
</html>